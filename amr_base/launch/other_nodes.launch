<launch>
      <arg name="namespace" default="amr" />

      <include file="$(find amr_autodocking)/launch/autodocking.launch"/>
      <include file="$(find amr_base)/launch/image_proc.launch"/>
      <include file="$(find ira_laser_tools)/launch/laserscan_multi_merger.launch"/>

      <node name="PC_write_PLC" pkg="amr_driver" type="PC_WRITE_PLC.py" 
            respawn="true" output="screen" ns="$(arg namespace)">
            <rosparam command="load" file="$(find amr_driver)/config/pc_write_plc_params.yaml"/>
      </node>

      <node name="PC_read_PLC" pkg="amr_driver" type="PC_READ_PLC.py" 
            respawn="true" output="screen" ns="$(arg namespace)">
           <rosparam command="load" file="$(find amr_driver)/config/pc_read_plc_params.yaml"/> 
      </node>

      <node name="amr_controller" pkg="amr_driver" type="controller.py" 
            respawn="true" output="screen" ns="$(arg namespace)"/>

      <node name="pose_estimation" pkg="amr_driver" type="pose_estimation.py" 
            respawn="true" output="screen" ns="$(arg namespace)"/>

      <node name="change_map" pkg="amr_driver" type="change_map.py" 
            respawn="true" output="screen" ns="$(arg namespace)">
            <param name="map_frame" type="string" value="map"/>
            <param name="robot_frame" type="string" value="base_footprint"/>
            <param name="map_config_path" type="string" value="$(find amr_driver)/config/maps_params.yaml"/>
            <param name="debug" type="bool" value="false"/>
      </node>

      <node name="safety_controller" pkg="amr_driver" type="safety_controller.py" 
            respawn="true" output="screen" ns="$(arg namespace)">
            <param name="max_speed" type="double" value="0.8"/>
            <param name="speed_at_warninglv1" type="double" value="0.3"/>
            <param name="speed_at_warninglv2" type="double" value="0.4"/>
      </node>

      <node name="front_depth_scanner_safety_status" pkg="amr_driver" type="front_depth_scan_status.py" 
            respawn="true" output="screen" ns="$(arg namespace)">
            <param name="camera_frame_id" value="front_camera_depth_frame"/>
      </node>

      <!-- <node name="test_lk1_auto_navigation" pkg="amr_driver" type="test_lk1_auto_navigation.py" output="screen" ns="$(arg namespace)">
      </node> -->

      <node name="front_scanner_safety_status" pkg="amr_driver" type="front_safety_status.py" 
            respawn="true" output="screen" ns="$(arg namespace)"/>

      <node name="back_scanner_safety_status" pkg="amr_driver" type="back_safety_status.py" 
            respawn="true" output="screen" ns="$(arg namespace)"/>

      <node name="ultrasonic_safety" pkg="amr_driver" type="ultrasonic_safety_status.py" 
            respawn="true" output="screen" ns="$(arg namespace)"/>

      <node name="safety_zone_type" pkg="amr_driver" type="safety_zone_type.py" 
            respawn="true" output="screen" ns="$(arg namespace)"/>

      <node name="speed_filter" pkg="amr_driver" type="speed_filter.py" 
            respawn="true" output="screen">
            <param name="max_speed" type="double" value="0.8"/>
      </node>

      <!-- <node name="pose_estimate_continous" pkg="amcl_apriltag"
            type="pose_estimate_continous_node" output="screen">
            <param name="distance_thresh" type="double" value="2.3"/>
      </node> -->
</launch>